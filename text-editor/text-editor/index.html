<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Core &ndash; Text Editor</title>
    <link href="../favicon.ico" rel="shortcut icon">

    <link href="../index.min.css" rel="stylesheet">
    <link href="../text-editor/ui/ui.min.css" rel="stylesheet">

    <script src="../text-editor.min.js"></script>

  </head>
  <body>

    <header>
      <h1><a href=".." rel="prev">Text Editor</a> &rsaquo; Core</h1>
      <p>This is the core <abbr title="Application Programming Interface">API</abbr> for doing text area&ndash;based text selection manipulation.</p>
      <section>
        <p><textarea class="textarea" id="editor" spellcheck="false">Lorem ipsum dolor sit amet.</textarea></p>
        <p>
          <button class="button" onclick="return editor.wrap('<b>', '</b>'), false;"><b style="display:inline-block;width:1em;">B</b></button>
          <button class="button" onclick="return editor.wrap('<i>', '</i>'), false;"><i style="display:inline-block;width:1em;">I</i></button>
          <button class="button" onclick="return editor.wrap('<u>', '</u>'), false;"><u style="display:inline-block;width:1em;">U</u></button>
        </p>
        <script>
        var editor = new TE(document.querySelector('#editor'));
        </script>
      </section>
    </header>

    <section>
      <h2 id="section:start">Start</h2>
      <p>Create a text area element, then include <a href="../text-editor.min.js" target="_blank"><code>text-editor.min.js</code></a> next to it:</p>
      <pre><code>&lt;!DOCTYPE html&gt;
&lt;html dir="ltr"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Test&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;&lt;textarea&gt;&lt;/textarea&gt;&lt;/p&gt;
    &lt;script src="text-editor.min.js"&gt;&lt;/script&gt;
    &lt;script&gt;
    var editor = new TE(document.querySelector('textarea'));
    &lt;/script&gt;
    &lt;p&gt;
      &lt;button onclick="return editor.wrap('&lt;b&gt;', '&lt;/b&gt;'), false;"&gt;Bold&lt;/button&gt;
      &lt;button onclick="return editor.wrap('&lt;i&gt;', '&lt;/i&gt;'), false;"&gt;Italic&lt;/button&gt;
      &lt;button onclick="return editor.wrap('&lt;u&gt;', '&lt;/u&gt;'), false;"&gt;Underline&lt;/button&gt;
    &lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
      <h2 id="section:configure">Configure</h2>
      <h3>Instance</h3>
      <pre><code>new TE(<var>node</var>);</code></pre>
      <ul>
        <li><var>node</var> &rarr; The text area element.</li>
      </ul>
      <pre><code>var editor = new TE(document.querySelector('textarea'));</code></pre>
      <h3>Configuration</h3>
      <p>Configuration is not available.</p>
      <h2 id="section:extend">Extend</h2>
      <p>All text editor instances are stored in <code>TE.__instance__</code> as a collection with keys generated by the text area ID, text area name or text area sequence:</p>
      <pre><code>console.log(TE.__instance__);</code></pre>
      <p>The <code>TE.each()</code> method allows you to loop through the captured instances easily:</p>
      <pre><code>TE.each(function($, key, any) {
    // `$` refers to the text editor instance
    // `key` refers to the instance key in `TE.__instance__`
    // `any` refers to `TE.__instance__`
});</code></pre>
      <h2 id="section:method">Methods</h2>
      <h3 id="section:method-target">Get the Editor Area</h3>
      <p>Getting the editor area <abbr title="Document Object Model">DOM</abbr>:</p>
      <pre><code>var target = editor.target;</code></pre>
      <h3 id="section:method-set">Set Value</h3>
      <p>Set value to the editor area:</p>
      <pre><code>editor.set('foo bar baz');</code></pre>
      <h3 id="section:method-get">Get Value</h3>
      <p>Get value from the editor area:</p>
      <pre><code>console.log(editor.get());
console.log(editor.get('default value if empty'));</code></pre>
      <h3 id="section:method-save">Save State</h3>
      <p>Save state to the editor storage:</p>
      <pre><code>editor.save('my_state_id', 1);</code></pre>
      <h3 id="section:method-restore">Restore State</h3>
      <p>Restore the saved state from the editor storage:</p>
      <pre><code>alert(editor.restore('my_state_id', '#')); // should return `1` or `#` if not available</code></pre>
      <h3 id="section:method-focus">Focus the Editor Area</h3>
      <p>Just focus to the editor area:</p>
      <pre><code>editor.focus();</code></pre>
      <p>Focus to the start of the editor area:</p>
      <pre><code>editor.focus(0);</code></pre>
      <p>Focus to the end of the editor area:</p>
      <pre><code>editor.focus(1);</code></pre>
      <h3 id="section:method-blur">Blur the Editor Area</h3>
      <pre><code>editor.blur();</code></pre>
      <h3 id="section:method-$">Get Selection</h3>
      <p>A method to capture the current text selection. Set the first parameter to <code>true</code> to capture the caret offset from text area in pixels:</p>
      <pre><code>console.log(editor.$(true));</code></pre>
      <pre><code>// for “test before i am selected test after”
// with “i am selected” as the selected value
{
  start: 12, // selection start
  end: 25, // selection end
  value: 'i am selected', // selected text
  before: 'test before ', // text before selection
  after: ' test after', // text after selection
  caret: [ // caret offset from text area in pixel(s)
    { // selection start
      x: 99,
      y: 3
    },
    { // selection end
      x: 203,
      y: 3
    }
  ],
  length: 13 // length of selected text
}</code></pre>
      <h3 id="section:method-select">Set Selection</h3>
      <p>Set selection range without <code>select</code> event:</p>
      <pre><code>editor.select(7, 10);</code></pre>
      <p>Move caret position:</p>
      <pre><code>editor.select(7);</code></pre>
      <p>Restore selection after editor&rsquo;s blur event:</p>
      <pre><code>editor.select();</code></pre>
      <p>Select all:</p>
      <pre><code>editor.select(true);</code></pre>
      <h3 id="section:method-replace">Replace At Selection</h3>
      <p>Replace selected text with something:</p>
      <pre><code>editor.replace(/foo/g, 'bar');</code></pre>
      <h3 id="section:method-replace_before">Replace Before Caret/Selection</h3>
      <p>Replace something before caret/selection with something:</p>
      <pre><code>editor.replaceBefore(/foo/g, 'bar');</code></pre>
      <h3 id="section:method-replace_after">Replace After Caret/Selection</h3>
      <p>Replace something after caret/selection with something:</p>
      <pre><code>editor.replaceAfter(/foo/g, 'bar');</code></pre>
      <h3 id="section:method-match">Match Selection</h3>
      <p>Return <code>true</code> if selection matched with pattern:</p>
      <pre><code>if (editor.match(/foo/)) { &hellip; }</code></pre>
      <p>Custom return value:</p>
      <pre><code>var match = editor.match(/^\d+$/, function(m) {
    return +(m[0] || 0);
});

if (match === 1) { &hellip; }</code></pre>
      <h3 id="section:method-insert">Insert At Caret/Selection</h3>
      <p>Insert something at caret/selection. The current selection will be replaced by the inserted text:</p>
      <pre><code>editor.insert(':)');</code></pre>
      <h3 id="section:method-insert_before">Insert Before Caret/Selection</h3>
      <p>Insert something before caret/selection. Set the second parameter to <code>true</code> to delete current selection before the text being inserted:</p>
      <pre><code>editor.insertBefore(':)', true);</code></pre>
      <h3 id="section:method-insert_before">Insert After Caret/Selection</h3>
      <p>Insert something after caret/selection. Set the second parameter to <code>true</code> to delete current selection before the text being inserted:</p>
      <pre><code>editor.insertAfter(':)', true);</code></pre>
      <h3 id="section:method-wrap">Wrap Selection</h3>
      <p>Wrap selection with <code>&lt;b&gt;</code> and <code>&lt;/b&gt;</code>:</p>
      <pre><code>editor.wrap('&lt;b&gt;', '&lt;/b&gt;');</code></pre>
      <p>Include <code>&lt;b&gt;</code> and <code>&lt;/b&gt;</code> to selection:</p>
      <pre><code>editor.wrap('&lt;b&gt;', '&lt;/b&gt;', true);</code></pre>
      <h3 id="section:method-wrap">Unwrap Selection</h3>
      <p>Unwrap selection from <code>&lt;b&gt;</code> and <code>&lt;/b&gt;</code>:</p>
      <pre><code>editor.unwrap('&lt;b&gt;', '&lt;/b&gt;');</code></pre>
      <p>Trim <code>&lt;b&gt;</code> and <code>&lt;/b&gt;</code> in selection:</p>
      <pre><code>editor.unwrap('&lt;b&gt;', '&lt;/b&gt;', true);</code></pre>
      <p>Unwrap selection from any <abbr title="Hyper Text Markup Language">HTML</abbr> tags:</p>
      <pre><code>editor.unwrap(/&lt;[^\/&lt;&gt;]+?&gt;/, /&lt;\/[^&lt;&gt;]+?&gt;/)</code></pre>
      <p>Trim <code>&lt;*&gt;</code> and <code>&lt;/*&gt;</code> in selection:</p>
      <pre><code>editor.unwrap(/&lt;[^\/&lt;&gt;]+?&gt;/, /&lt;\/[^&lt;&gt;]+?&gt;/, true)</code></pre>
      <h3 id="section:method-indent">Indent At Caret/Selection</h3>
      <p>Indent selected text with a tab:</p>
      <pre><code>editor.indent();</code></pre>
      <p>Indent selected text with a <code>::</code>:</p>
      <pre><code>editor.indent('::');</code></pre>
      <h3 id="section:method-outdent">Outdent At Caret/Selection</h3>
      <p>Outdent selected text from a tab:</p>
      <pre><code>editor.outdent();</code></pre>
      <p>Outdent selected text from a <code>::</code>:</p>
      <pre><code>editor.outdent('::');</code></pre>
      <p>Outdent selected text from any white&ndash;spaces:</p>
      <pre><code>editor.outdent(/[\t ]*/);</code></pre>
      <h3 id="section:method-trim">Trim White&ndash;Spaces</h3>
      <p>Trim white&ndash;spaces before and after selection range, and at the beginning and end of selection range:</p>
      <pre><code>editor.trim();</code></pre>
      <p>Replace the trimmed white&ndash;spaces before and after selection range with <code>*</code>:</p>
      <pre><code>editor.trim('*', '*');</code></pre>
      <p>Replace the trimmed white&ndash;spaces at the beginning and end of selection range with <code>*</code>:</p>
      <pre><code>editor.trim("", "", '*', '*');</code></pre>
      <p>Left trim only:</p>
      <pre><code>editor.trim("", false, "", false);</code></pre>
      <p>Right trim only:</p>
      <pre><code>editor.trim(false, "", false, "");</code></pre>
      <h3 id="section:method-toggle">Toggle States</h3>
      <p>The first parameter should return an array index to access a function in the second parameter by its array index:</p>
      <pre><code>document.querySelector('button').addEventListener("click", function() {
    var state = (editor.$().value.match(/^do state (\d+)$/) || [0]); // default is `0`
    editor.toggle(state[0], [
        function($) {
            alert('did state 0');
        },
        function($) {
            alert('did state 1');
        },
        function($) {
            alert('did state 2');
        },
        &hellip;
    ]);
}, false);</code></pre>
      <h3 id="section:method-record">Update History</h3>
      <p>Update history data:</p>
      <pre><code>editor.record();</code></pre>
      <p>Replace the second history data with custom value:</p>
      <pre><code>// 0: content
// 1: selection start
// 2: selection end
// 3: scroll / text height
editor.record(['foo bar baz', 2, 4, 1], 1); // 0&ndash;based index</code></pre>
      <h3 id="section:method-loss">Remove History</h3>
      <p>Remove the last history data:</p>
      <pre><code>editor.loss();</code></pre>
      <p>Remove the second history data:</p>
      <pre><code>editor.loss(1); // 0&ndash;based index</code></pre>
      <p>Reset the history data:</p>
      <pre><code>editor.loss(true);</code></pre>
      <h3 id="section:method-records">Read History</h3>
      <p>Read all history data:</p>
      <pre><code>console.log(editor.records());</code></pre>
      <p>Read the second history data:</p>
      <pre><code>console.log(editor.records(1)); // 0&ndash;based index</code></pre>
      <p>Read the second history data if any, otherwise, return <code>#</code>:</p>
      <pre><code>console.log(editor.records(1, '#'));</code></pre>
      <h3 id="section:method-0">Disable History Feature</h3>
      <p>Temporarily disable the history feature:</p>
      <pre><code>editor[0](); // disable

editor.foo().bar().baz();

editor[1](); // re&ndash;enable</code></pre>
      <p>Inline mode:</p>
      <pre><code>editor[0]().foo().bar().baz()[1]();</code></pre>
      <h3 id="section:method-undo">Undo</h3>
      <p>Undo from the previous state:</p>
      <pre><code>editor.undo();</code></pre>
      <h3 id="section:method-redo">Redo</h3>
      <p>Redo from the previous undo:</p>
      <pre><code>editor.redo();</code></pre>
      <h3 id="section:method-scroll">Scroll</h3>
      <p>Get the current scroll step (text area scroll height divided by text height) and text height:</p>
      <pre><code>console.log(editor.scroll()); // `[4, 16]`</code></pre>
      <p>Scroll one step down from the current scroll step:</p>
      <pre><code>editor.scroll(1);</code></pre>
      <p>Scroll one step up from the current scroll step:</p>
      <pre><code>editor.scroll(-1);</code></pre>
      <p>Scroll 3 rows from top:</p>
      <pre><code>editor.scroll(0, 3);</code></pre>
      <p>Scroll to the end of the text area:</p>
      <pre><code>editor.scroll(true);</code></pre>
      <h2 id="section:key">Keyboard Key Events</h2>
      <p>Normalized <code>KeyboardEvent.key</code> value in their lower&ndash;cased mode. It does support key aliases and regular expression matching too:</p>
      <pre><code>editor.target.addEventListener("keydown", function(e) {

    console.log(e.key); // [^1]

    console.log(e.TE.key()); // [^2]
    console.log(e.TE.control()); // [^3]
    console.log(e.TE.shift()); // [^4]
    console.log(e.TE.option()); // [^5]
    console.log(e.TE.meta()); // [^6]

    console.log(e.TE.control('b')); // [^7]

    // check for current key character (try pressing the &ldquo;control&rdquo; key)
    if (e.TE.key('ctrl')) { &hellip; } // [^8]
    if (e.TE.key() === 'ctrl') { &hellip; } // [^9]
    if (e.TE.key() === 'control') { &hellip; } // [^10]
    if (e.TE.key(/^[abc]$/)) { &hellip; } // [^11]
    if (e.TE.key(['ctrl', 'alt', 'shift'])) { &hellip; } // [^12]

}, false);

// [^1]: return the native `KeyboardEvent.key` value if supported
// [^2]: return the current key character (lower&ndash;cased)
// [^3]: return `true` if &ldquo;control&rdquo; key is pressed
// [^4]: return `true` if &ldquo;shift&rdquo; key is pressed
// [^5]: return `true` if &ldquo;option&rdquo; key is pressed
// [^6]: return `true` if &ldquo;meta&rdquo; key is pressed
// [^7]: return `true` if &ldquo;control&rdquo; and `b` keys are pressed
// [^8]: `ctrl` is an alias for `control`, this will return `true`
// [^9]: comparing `ctrl` outside the function, this will return `false`
// [^10]: is equal to the original key value, this will return `true`
// [^11]: return `true` if key character is either `a`, `b` or `c`
// [^12]: return `true` if key character is either `control`, `alt` or `shift`</code></pre>
      <h2 id="section:utility">Utilities</h2>
      <p>Helper functions. Most of them can be accessed staticly:</p>
      <h3 id="section:utility-_-x">Escape</h3>
      <p>Escape regular expression characters:</p>
      <pre><code>var escaped = TE._.x('foo/bar % **baz**'); // return `foo\/bar % \*\*baz\*\*`</code></pre>
      <h3 id="section:utility-_-extend">Extend</h3>
      <p>Extend two objects:</p>
      <pre><code>var o = {
    foo: 0,
    bar: 1,
    baz: {
        qux: 2
    }
};

o = TE._.extend(o, {
    bar: '#',
    baz: {
        qux: '#'
        wow: '#'
    }
}); // return `{foo:0,bar:'#',baz:{qux:'#',wow:'#'}}`</code></pre>
      <h3 id="section:utility-_-each">Iterator</h3>
      <p>Iterate over array or object:</p>
      <pre><code>TE._.each([0, 1, 2, 3, 4], function(value, key, source) {
    console.log(arguments);
});</code></pre>
      <pre><code>TE._.each({"foo":0,"bar":1,"baz":2}, function(value, key, source) {
    console.log(arguments);
});</code></pre>
      <h3 id="section:utility-_-trim">Trim White&ndash;Spaces</h3>
      <p>Remove white&ndash;spaces at the beginning and end of a string:</p>
      <pre><code>TE._.trim('  foo bar baz\r\n');</code></pre>
      <p>Remove white&ndash;spaces at the beginning of a string:</p>
      <pre><code>TE._.trim('  foo bar baz\r\n', 0);</code></pre>
      <p>Remove white&ndash;spaces at the end of a string:</p>
      <pre><code>TE._.trim('  foo bar baz\r\n', 1);</code></pre>
      <h3 id="section:utility-_-css">Get/Set <abbr title="Cascading Style Sheet">CSS</abbr> Value</h3>
      <p>Get all <abbr title="Cascading Style Sheet">CSS</abbr> properties from <code>#foo</code>:</p>
      <pre><code>var css = TE._.css(document.querySelector('#foo'));</code></pre>
      <p>Get <code>color</code> value from <code>#foo</code>:</p>
      <pre><code>var css = TE._.css(document.querySelector('#foo'), 'color'); // return `rgb(0, 0, 0)`</code></pre>
      <p>Get <code>background-color</code>, <code>color</code> and <code>border-top-width</code> value from <code>#foo</code>:</p>
      <pre><code>var css = TE._.css(document.querySelector('#foo'), [
    'background-color',
    'color',
    'border-top-width'
]); // return `['rgb(255, 255, 255)', 'rgb(0, 0, 0)', 1]`</code></pre>
      <p>Set <code>background-color</code>, <code>color</code> and <code>border</code> style to <code>#foo</code>:</p>
      <pre><code>TE._.css(document.querySelector('#foo'), {
    'background-color': '#fff',
    'color': '#000',
    'border': '1px solid #000'
}); // return `document.querySelector('#foo')`</code></pre>
      <blockquote>
        <p>All <abbr title="Cascading Style Sheet">CSS</abbr> value that can be parsed by JavaScript <code>parseFloat</code> will be returned as number:</p>
        <pre><code>TE._.css(document.querySelector('#foo'), 'border-top-width'); // return `1`</code></pre>
        <p>To disable that behaviour, prepend a <code>\0</code> to the <abbr title="Cascading Style Sheet">CSS</abbr> property:</p>
        <pre><code>TE._.css(document.querySelector('#foo'), '\0border-top-width'); // return `1px`</code></pre>
      </blockquote>
      <h3 id="section:utility-_-edge">Edge</h3>
      <p>Prevent <var>input</var> exceeds the <var>min</var> and <var>max</var> value:</p>
      <pre><code>TE._.edge(<var>input</var>, <var>min</var>, <var>max</var>);</code></pre>
      <h3 id="section:utility-_-pattern">Pattern</h3>
      <p>Currently, this is just an alias for <code>new RegExp()</code>:</p>
      <pre><code>TE._.pattern('&lt;\\/?[^&lt;&gt;\\s]+.*?&gt;', 'g'); // match HTML tags</code></pre>
      <h3 id="section:utility-_-i">Parse Integer</h3>
      <p>Get integer/float number from a string input. Currently, this is just an alias for <code>parseFloat(<var>input</var>)</code>:</p>
      <pre><code>TE._.i('1px'); // is equal to `parseFloat('1px')`</code></pre>
      <h3 id="section:utility-_-timer">Timer</h3>
      <h4 id="section:utiliy-timer-set">Set</h4>
      <p>Currently, this is just an alias for <code>setTimeout()</code>:</p>
      <pre><code>var foo = function() { &hellip; };
TE._.timer.set(foo); // is equal to `setTimeout(foo, 0)`</code></pre>
      <pre><code>TE._.timer.set(foo, 1000); // is equal to `setTimeout(foo, 1000)`</code></pre>
      <h4 id="section:utiliy-timer-reset">Reset</h4>
      <p>Currently, this is just an alias for <code>clearTimeout()</code>:</p>
      <pre><code>TE._.timer.reset(foo); // is equal to `clearTimeout(foo)`</code></pre>
      <h3 id="section:utility-is">Logic</h3>
      <p>Data type checks.</p>
      <h4 id="section:utility-is-a">Array</h4>
      <p>Check if <var>input</var> is array:</p>
      <pre><code>TE.is.a(input);</code></pre>
      <h4 id="section:utility-is-b">Boolean</h4>
      <p>Check if <var>input</var> is <code>true</code> or <code>false</code>:</p>
      <pre><code>TE.is.b(input);</code></pre>
      <h4 id="section:utility-is-e">Element</h4>
      <p>Check if <var>input</var> is a <abbr title="Hyper Text Markup Language">HTML</abbr> element:</p>
      <pre><code>TE.is.e(input);</code></pre>
      <h4 id="section:utility-is-f">Function</h4>
      <p>Check if <var>input</var> is function:</p>
      <pre><code>TE.is.f(input);</code></pre>
      <h4 id="section:utility-is-i">Number</h4>
      <p>Check if <var>input</var> is number:</p>
      <pre><code>TE.is.i(input);</code></pre>
      <h4 id="section:utility-is-n">Null</h4>
      <p>Check if <var>input</var> is <code>null</code>:</p>
      <pre><code>TE.is.n(input);</code></pre>
      <h4 id="section:utility-is-o">Object</h4>
      <p>Check if <var>input</var> is array or object:</p>
      <pre><code>TE.is.o(input);</code></pre>
      <h4 id="section:utility-is-r">Regular Expression</h4>
      <p>Check if <var>input</var> is a regular expression pattern:</p>
      <pre><code>TE.is.r(input); // return `input.source` or `false`</code></pre>
      <h4 id="section:utility-is-s">String</h4>
      <p>Check if <var>input</var> is a string:</p>
      <pre><code>TE.is.s(input);</code></pre>
      <h4 id="section:utility-is-x">Undefined</h4>
      <p>Check if <var>input</var> is undefined:</p>
      <pre><code>TE.is.x(input);</code></pre>
      <h3 id="section:method-is">Editor Type</h3>
      <p>Check for user defined editor type that is stored in <code>editor.type</code>. Default is <code>""</code>:</p>
      <pre><code>console.log(editor.is('Markdown'));</code></pre>
      <pre><code>console.log(editor.is(/^(?:HTML|Markdown)$/));</code></pre>
      <h2 id="section:test">Tests</h2>
      <ul>
        <li><a href="test.html">Common Tests</a></li>
        <li><a href="test.key.html">Test for <code>TE</code> Property in <code>KeyboardEvent</code></a></li>
        <li><a href="test.$.caret.html">Test for <code>caret</code> Property in <code>editor.$()</code> Method</a></li>
        <li><a href="test.match.html">Test for <code>editor.match()</code> Method</a></li>
      </ul>
      <p class="center"><a class="button" href="ui" rel="next">Text Editor &rsaquo; Core &rsaquo; UI</a></p>
    </section>

    <footer>
      <span class="left">&copy; 2016 &middot; Made with <i class="icon icon-ambulance" onmouseover="this.className='icon icon-heart';" ontouchstart="this.className='icon icon-heart';"></i> by <a href="">Taufik Nurrohman</a></span>
      <span class="right"><a href="https://github.com/tovic/text-editor"><i class="icon icon-github"></i> GitHub</a></span>
    </footer>

    <script src="../index.min.js"></script>

  </body>
</html>